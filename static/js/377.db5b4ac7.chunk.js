"use strict";(self.webpackChunktest_task_tweet_cards=self.webpackChunktest_task_tweet_cards||[]).push([[377],{377:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var o=n(165),r=n(861),a=n(439),s=n(791),c={card:"TweetCard_card__QzHVm",cardAvatar:"TweetCard_cardAvatar__Xh2gV",cardLine:"TweetCard_cardLine__2U-wa",cardLogo:"TweetCard_cardLogo__kvFXr",cardPicture:"TweetCard_cardPicture__HYV2M",cardTweets:"TweetCard_cardTweets__igk2T",cardFollowers:"TweetCard_cardFollowers__GWwn6",cardButtonFollow:"TweetCard_cardButtonFollow__A5Re8",cardButtonFollowing:"TweetCard_cardButtonFollowing__GBrVY"},l=n(703),i=n(888),u=n(184);function d(e){var t=e.card,n=JSON.parse(localStorage.getItem("following"))||[],o=(0,s.useState)(n.includes(t.id)?"Following":"Follow"),r=(0,a.Z)(o,2),d=r[0],w=r[1],_=(0,s.useState)(n.includes(t.id)?t.followers+1:t.followers),p=(0,a.Z)(_,2),g=p[0],f=p[1];return(0,u.jsxs)("div",{className:c.card,children:[(0,u.jsx)("img",{src:t.avatar,alt:t.user,width:"80",height:"80",className:c.cardAvatar}),(0,u.jsx)("div",{className:c.cardLine}),(0,u.jsx)("img",{src:l.Z,alt:"logo GoIT",className:c.cardLogo}),(0,u.jsx)("img",{src:i.Z,alt:"backgroung_image",className:c.cardPicture}),(0,u.jsxs)("p",{className:c.cardTweets,children:[Number(t.tweets).toLocaleString("en")," Tweets"]}),(0,u.jsxs)("p",{className:c.cardFollowers,children:[Number(g).toLocaleString("en")," Followers"]}),(0,u.jsx)("button",{type:"button",onClick:function(){var e=JSON.parse(localStorage.getItem("following"))||[];if("Follow"===d&&(f(g+1),w("Following"),e.push(t.id),window.localStorage.setItem("following",JSON.stringify(e))),"Following"===d){f(g-1),w("Follow");var n=e.filter((function(e){return e!==t.id}));window.localStorage.setItem("following",JSON.stringify(n))}},className:"Follow"===d?c.cardButtonFollow:c.cardButtonFollowing,children:d})]})}var w=n(243),_="https://64579cc11a4c152cf98605f9.mockapi.io/phonebook";function p(){return g.apply(this,arguments)}function g(){return(g=(0,r.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Z.get("".concat(_,"/users"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f={tweetsMenu:"Tweets_tweetsMenu__kcdUt",dropdown:"Tweets_dropdown__L2U0o",cards:"Tweets_cards__iiP7G",buttonBack:"Tweets_buttonBack__NnuCc",buttonDropdown:"Tweets_buttonDropdown__0ubke",buttonLoadmore:"Tweets_buttonLoadmore__VWzhe",link:"Tweets_link__KqW3h",active:"Tweets_active__fzgdo",buttonSpan:"Tweets_buttonSpan__67YNL",error:"Tweets_error__UCIaG"},m=n(87),h=n(617);function b(){var e=(0,s.useState)([]),t=(0,a.Z)(e,2),n=t[0],c=t[1],l=(0,s.useState)(3),i=(0,a.Z)(l,2),w=i[0],_=i[1],g=(0,s.useState)(null),b=(0,a.Z)(g,2),v=b[0],x=b[1],N=(0,s.useState)([]),k=(0,a.Z)(N,2),j=k[0],T=k[1];return(0,s.useEffect)((function(){function e(){return(e=(0,r.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p();case 3:t=e.sent,c(t),T(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),x(e.t0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,u.jsxs)("div",{className:f.tweetsWrapper,children:[!v&&(0,u.jsxs)("div",{className:f.tweetsMenu,children:[(0,u.jsx)("button",{className:f.buttonBack,type:"button",children:(0,u.jsxs)(m.OL,{className:function(e){return e.isActive?f.active:f.link},to:"/",children:[(0,u.jsx)(h.jTe,{size:"24"}),(0,u.jsx)("span",{className:f.buttonSpan,children:"Back"})]})}),(0,u.jsxs)("ul",{className:f.dropdown,children:[(0,u.jsx)("button",{className:f.buttonDropdown,type:"button",autoFocus:!0,onClick:function(){T(n)},children:"All"}),(0,u.jsx)("button",{className:f.buttonDropdown,type:"button",onClick:function(){var e=JSON.parse(localStorage.getItem("following"))||[];T(n.filter((function(t){return n=t.id,!e.includes(n);var n})))},children:"Follow"}),(0,u.jsx)("button",{className:f.buttonDropdown,type:"button",onClick:function(){var e=JSON.parse(localStorage.getItem("following"))||[];T(n.filter((function(t){return n=t.id,e.includes(n);var n})))},children:"Following"})]})]}),(0,u.jsx)("ul",{className:f.cards,children:null===j||void 0===j?void 0:j.slice(0,w).map((function(e){return(0,u.jsx)("li",{children:(0,u.jsx)(d,{card:e})},e.id)}))}),w<j.length&&j.length>0&&(0,u.jsx)("button",{className:f.buttonLoadmore,type:"button",onClick:function(){_((function(e){return e+3}))},children:"Load more"}),v&&(0,u.jsxs)("div",{className:f.error,children:[(0,u.jsxs)("p",{children:["Ooops, something went wrong: ",v.message,"."]}),(0,u.jsx)("p",{children:"Please try again."})]})]})}}}]);
//# sourceMappingURL=377.db5b4ac7.chunk.js.map