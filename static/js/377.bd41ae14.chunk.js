"use strict";(self.webpackChunktest_task_tweet_cards=self.webpackChunktest_task_tweet_cards||[]).push([[377],{377:function(t,e,n){n.r(e),n.d(e,{default:function(){return b}});var a=n(165),r=n(861),o=n(439),s=n(791),c={card:"TweetCard_card__QzHVm",cardAvatar:"TweetCard_cardAvatar__Xh2gV",cardLine:"TweetCard_cardLine__2U-wa",cardLogo:"TweetCard_cardLogo__kvFXr",cardPicture:"TweetCard_cardPicture__HYV2M",cardTweets:"TweetCard_cardTweets__igk2T",cardFollowers:"TweetCard_cardFollowers__GWwn6",cardButtonFollow:"TweetCard_cardButtonFollow__A5Re8",cardButtonFollowing:"TweetCard_cardButtonFollowing__GBrVY"},l=n(703),i=n(888),u=n(184);function d(t){var e=t.card,n=JSON.parse(localStorage.getItem("following"))||[],a=(0,s.useState)(n.includes(e.id)?"Following":"Follow"),r=(0,o.Z)(a,2),d=r[0],w=r[1],_=(0,s.useState)(n.includes(e.id)?e.followers+1:e.followers),p=(0,o.Z)(_,2),f=p[0],g=p[1];return(0,u.jsxs)("div",{className:c.card,children:[(0,u.jsx)("img",{src:e.avatar,alt:e.user,width:"80",height:"80",className:c.cardAvatar}),(0,u.jsx)("div",{className:c.cardLine}),(0,u.jsx)("img",{src:l.Z,alt:"logo GoIT",className:c.cardLogo}),(0,u.jsx)("img",{src:i.Z,alt:"backgroung_image",className:c.cardPicture}),(0,u.jsxs)("p",{className:c.cardTweets,children:[Number(e.tweets).toLocaleString("en")," Tweets"]}),(0,u.jsxs)("p",{className:c.cardFollowers,children:[Number(f).toLocaleString("en")," Followers"]}),(0,u.jsx)("button",{type:"button",onClick:function(){var t=JSON.parse(localStorage.getItem("following"))||[];if("Follow"===d&&(g(f+1),w("Following"),t.push(e.id),window.localStorage.setItem("following",JSON.stringify(t))),"Following"===d){g(f-1),w("Follow");var n=t.filter((function(t){return t!==e.id}));window.localStorage.setItem("following",JSON.stringify(n))}},className:"Follow"===d?c.cardButtonFollow:c.cardButtonFollowing,children:d})]})}var w=n(243),_="https://64579cc11a4c152cf98605f9.mockapi.io/phonebook";function p(){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)((0,a.Z)().mark((function t(){var e;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.Z.get("".concat(_,"/users"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var g={tweetsMenu:"Tweets_tweetsMenu__kcdUt",dropdawn:"Tweets_dropdawn__DvyHP",cards:"Tweets_cards__iiP7G",buttonBack:"Tweets_buttonBack__NnuCc",buttonDropdawn:"Tweets_buttonDropdawn__kEMKg",buttonLink:"Tweets_buttonLink__Z7A9L",buttonLoadmore:"Tweets_buttonLoadmore__VWzhe"},m=n(87),h=n(689);function b(){var t=(0,s.useState)([]),e=(0,o.Z)(t,2),n=e[0],c=e[1],l=(0,s.useState)(3),i=(0,o.Z)(l,2),w=i[0],_=i[1],f=(0,s.useState)(null),b=(0,o.Z)(f,2),v=b[0],k=b[1],N=(0,s.useState)([]),x=(0,o.Z)(N,2),T=x[0],j=x[1];return(0,s.useEffect)((function(){function t(){return(t=(0,r.Z)((0,a.Z)().mark((function t(){var e;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p();case 3:e=t.sent,c(e),j(e),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),k(t.t0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),(0,u.jsxs)("div",{className:g.tweetsWrapper,children:[(0,u.jsxs)("div",{className:g.tweetsMenu,children:[(0,u.jsx)("button",{className:g.buttonBack,type:"button",children:(0,u.jsx)(m.OL,{className:g.buttonLink,to:"/",children:"Back"})}),(0,u.jsxs)("ul",{className:g.dropdawn,children:[(0,u.jsx)("button",{className:g.buttonDropdawn,type:"button",onClick:function(){j(n)},children:"All"}),(0,u.jsx)("button",{className:g.buttonDropdawn,type:"button",onClick:function(){var t=JSON.parse(localStorage.getItem("following"))||[];j(n.filter((function(e){return n=e.id,!t.includes(n);var n})))},children:"Follow"}),(0,u.jsx)("button",{className:g.buttonDropdawn,type:"button",onClick:function(){var t=JSON.parse(localStorage.getItem("following"))||[];j(n.filter((function(e){return n=e.id,t.includes(n);var n})))},children:"Following"})]})]}),(0,u.jsx)("ul",{className:g.cards,children:null===T||void 0===T?void 0:T.slice(0,w).map((function(t){return(0,u.jsx)("li",{children:(0,u.jsx)(d,{card:t})},t.id)}))}),w<T.length&&T.length>0&&(0,u.jsx)("button",{className:g.buttonLoadmore,type:"button",onClick:function(){_((function(t){return t+3}))},children:"Load more"}),v&&(0,u.jsx)(h.Fg,{to:"/"})]})}}}]);
//# sourceMappingURL=377.bd41ae14.chunk.js.map