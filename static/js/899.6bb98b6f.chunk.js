"use strict";(self.webpackChunktest_task_tweet_cards=self.webpackChunktest_task_tweet_cards||[]).push([[899],{899:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var n=r(165),a=r(861),o=r(439),s=r(791),c={card:"TweetCard_card__QzHVm",cardAvatar:"TweetCard_cardAvatar__Xh2gV",cardLine:"TweetCard_cardLine__2U-wa",cardLogo:"TweetCard_cardLogo__kvFXr",cardPicture:"TweetCard_cardPicture__HYV2M",cardTweets:"TweetCard_cardTweets__igk2T",cardFollowers:"TweetCard_cardFollowers__GWwn6",cardButtonFollow:"TweetCard_cardButtonFollow__A5Re8",cardButtonFollowing:"TweetCard_cardButtonFollowing__GBrVY"},l=r(703),i=r(888),u=r(184);function d(e){var t=e.card,r=JSON.parse(localStorage.getItem("following"))||[],n=(0,s.useState)(r.includes(t.id)?"Following":"Follow"),a=(0,o.Z)(n,2),d=a[0],w=a[1],_=(0,s.useState)(r.includes(t.id)?t.followers+1:t.followers),p=(0,o.Z)(_,2),f=p[0],g=p[1];return(0,u.jsxs)("div",{className:c.card,children:[(0,u.jsx)("img",{src:t.avatar,alt:t.user,width:"80",height:"80",className:c.cardAvatar}),(0,u.jsx)("div",{className:c.cardLine}),(0,u.jsx)("img",{src:l.Z,alt:"logo GoIT",className:c.cardLogo}),(0,u.jsx)("img",{src:i.Z,alt:"background_image",className:c.cardPicture}),(0,u.jsxs)("p",{className:c.cardTweets,children:[Number(t.tweets).toLocaleString("en")," Tweets"]}),(0,u.jsxs)("p",{className:c.cardFollowers,children:[Number(f).toLocaleString("en")," Followers"]}),(0,u.jsx)("button",{type:"button",onClick:function(){var e=JSON.parse(localStorage.getItem("following"))||[];if("Follow"===d&&(g(f+1),w("Following"),e.push(t.id),window.localStorage.setItem("following",JSON.stringify(e))),"Following"===d){g(f-1),w("Follow");var r=e.filter((function(e){return e!==t.id}));window.localStorage.setItem("following",JSON.stringify(r))}},className:"Follow"===d?c.cardButtonFollow:c.cardButtonFollowing,children:d})]})}var w=r(243),_="https://64579cc11a4c152cf98605f9.mockapi.io/phonebook";function p(){return f.apply(this,arguments)}function f(){return(f=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Z.get("".concat(_,"/users"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g={tweetsMenu:"Tweets_tweetsMenu__kcdUt",cards:"Tweets_cards__iiP7G",buttonBack:"Tweets_buttonBack__NnuCc",buttonLoadmore:"Tweets_buttonLoadmore__VWzhe",link:"Tweets_link__KqW3h",active:"Tweets_active__fzgdo",buttonSpan:"Tweets_buttonSpan__67YNL",error:"Tweets_error__UCIaG"},h=r(87),m=r(617),v={dropdown:"Dropdown_dropdown__9z800",buttonDropdown:"Dropdown_buttonDropdown__WO-zS"};function b(e){var t=e.types,r=e.showType,n=e.active;return(0,u.jsx)("div",{className:v.dropdown,children:t.map((function(e){return(0,u.jsx)("button",{className:v.buttonDropdown,type:"button",active:n,onClick:function(){return r(e)},children:e},e)}))})}function x(){var e=(0,s.useState)([]),t=(0,o.Z)(e,2),r=t[0],c=t[1],l=(0,s.useState)(3),i=(0,o.Z)(l,2),w=i[0],_=i[1],f=(0,s.useState)(null),v=(0,o.Z)(f,2),x=v[0],k=v[1],N=(0,s.useState)([]),T=(0,o.Z)(N,2),j=T[0],S=T[1],F=["All","Follow","Following"],C=(0,s.useState)(F[0]),Z=(0,o.Z)(C,2),y=Z[0],L=Z[1];(0,s.useEffect)((function(){function e(){return(e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p();case 3:t=e.sent,c(t),S(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),k(e.t0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var B=function(){S(r)},O=function(){var e=JSON.parse(localStorage.getItem("following"))||[];S(r.filter((function(t){return r=t.id,!e.includes(r);var r})))},A=function(){var e=JSON.parse(localStorage.getItem("following"))||[];S(r.filter((function(t){return r=t.id,e.includes(r);var r})))};return(0,u.jsxs)("div",{className:g.tweetsWrapper,children:[!x&&(0,u.jsxs)("div",{className:g.tweetsMenu,children:[(0,u.jsx)("button",{className:g.buttonBack,type:"button",children:(0,u.jsxs)(h.OL,{className:function(e){return e.isActive?g.active:g.link},to:"/",children:[(0,u.jsx)(m.jTe,{size:"24"}),(0,u.jsx)("span",{className:g.buttonSpan,children:"Back"})]})}),(0,u.jsx)(b,{types:F,showType:function(e){switch(e){case"All":B(),L(e);break;case"Follow":O(),L(e);break;case"Following":A(),L(e);break;default:B(),L(F[0])}},active:y})]}),(0,u.jsx)("ul",{className:g.cards,children:null===j||void 0===j?void 0:j.slice(0,w).map((function(e){return(0,u.jsx)("li",{children:(0,u.jsx)(d,{card:e,showAll:B})},e.id)}))}),w<j.length&&j.length>0&&(0,u.jsx)("button",{className:g.buttonLoadmore,type:"button",onClick:function(){_((function(e){return e+3}))},children:"Load more"}),x&&(0,u.jsxs)("div",{className:g.error,children:[(0,u.jsxs)("p",{children:["Ooops, something went wrong: ",x.message,"."]}),(0,u.jsx)("p",{children:"Please try again."})]})]})}}}]);
//# sourceMappingURL=899.6bb98b6f.chunk.js.map